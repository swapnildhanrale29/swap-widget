function ast_process_image_uploader(){jQuery(".ast-field-image").each(function(a,b){var c=jQuery(b).parents(".widget-content, .fl-builder-widget-settings"),d=c.find(".ast-field-image-meta").val();""==d?c.find(".ast-image-size-select, .ast-image-width").hide():c.find(".ast-image-size-select, .ast-image-width").show()})}function ast_widgets_field_colorpicker(){"object"==typeof jQuery.wp&&"function"==typeof jQuery.wp.wpColorPicker&&jQuery("#widgets-right .ast-widgets-field-colorpicker").wpColorPicker()}jQuery(document).on("click",".controls .add",function(a){jQuery(this).closest(".repeater").clone().appendTo(".fl-builder-widget-settings .repeaters, .widget.open .repeaters, .customize-control.expanded .widget .repeaters");var b=jQuery(this).closest(".ast-widget").find(".ast-widget-field-text input").first();"undefined"!=typeof b&&b.trigger("change")}),jQuery(document).on("click",".controls .remove",function(a){var b=jQuery(".fl-builder-widget-settings .repeaters .repeater:last, .widget.open .repeaters .repeater:last, .customize-control.expanded .widget .repeaters .repeater:last").index();if(b>0){if(confirm(ast_widgets.repeater_msg_confirm)){var c=jQuery(this).closest(".ast-widget").find(".ast-widget-field-text input").first();jQuery(this).closest(".repeater").remove(),"undefined"!=typeof c&&c.trigger("change")}}else alert(ast_widgets.repeater_msg_error)}),jQuery(document).on("click",".ast-select-image",function(a){var b=jQuery(this),c=b.parents(".widget-content, .fl-builder-widget-settings"),d=wp.media({title:"Select or Upload Image",button:{text:"Choose Image"},library:{type:"image"},multiple:!1});return d.on("close",function(){var a=d.state().get("selection").toJSON(),e=a[0].url;if(c.find(".ast-remove-image").length>0)c.find(".ast-field-image-preview img").attr("src",e);else{var f='<div class="ast-field-image-preview-inner">\t\t<span class="ast-remove-image button">X</span>\t\t<img src="'+e+'" /></div>';c.find(".ast-field-image-preview").append(f)}c.find(".ast-image-url").val(a[0].url),c.find(".ast-image-alt").val(a[0].alt),c.find(".ast-image-title").val(a[0].title);var g="id:"+a[0].id+"^url:"+a[0].url+"^alt:"+a[0].alt+"^title:"+a[0].title;c.find(".ast-field-image-meta").val(g),c.find(".ast-image-size-select, .ast-image-width").show();var h=b.closest(".ast-widget").find(".ast-widget-field-text input").first();"undefined"!=typeof h&&h.trigger("change")}),d.open(),!1}),jQuery(document).on("click",".ast-remove-image",function(a){if(confirm("Do you want to remove this image?")){var b=jQuery(this),c=b.closest(".ast-widget").find(".ast-widget-field-text input").first(),d=b.parents(".widget-content, .fl-builder-widget-settings");d.find(".ast-field-image-preview").html(""),d.find(".ast-field-image-preview img").attr("src",""),d.find(".ast-field-image-meta").val(""),d.find(".ast-image-url").val(""),d.find(".ast-image-alt").val(""),d.find(".ast-image-title").val(""),d.find(".ast-image-size-select, .ast-image-width").hide(),"undefined"!=typeof c&&c.trigger("change")}}),jQuery(document).on("widget-updated widget-added",function(){ast_process_image_uploader()}),jQuery(document).ready(function(a){ast_process_image_uploader()}),jQuery(document).on("widget-updated widget-added",function(){ast_widgets_field_colorpicker()}),jQuery(document).ready(function(a){ast_widgets_field_colorpicker()}),jQuery(document).ready(function(){function a(){jQuery(document).find(".widget-address-map-wrap input[type=checkbox]").each(function(a,b){"checked"==jQuery(this).attr("checked")?jQuery(this).parent().next(".widget-address-map-pos-wrap").show():jQuery(this).parent().next(".widget-address-map-pos-wrap").hide()})}a(),jQuery(document).on("widget-added",a),jQuery(document).on("widget-updated",a),jQuery(document).on("change",".widget-address-map-wrap input[type=checkbox]",function(){"checked"==jQuery(this).attr("checked")?jQuery(this).parent().next(".widget-address-map-pos-wrap").show():jQuery(this).parent().next(".widget-address-map-pos-wrap").hide()})});